# Dual Editing Modes - Quick Comparison

**Two distinct editing contexts in SHYPN**

---

## üìä Side-by-Side Comparison

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   CREATE MODE (Interactive)         ‚îÇ   PATHWAY EDIT MODE (Imported)      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                     ‚îÇ                                     ‚îÇ
‚îÇ Purpose: Build from scratch         ‚îÇ Purpose: Refine imported pathways   ‚îÇ
‚îÇ                                     ‚îÇ                                     ‚îÇ
‚îÇ Visual Style:                       ‚îÇ Visual Style:                       ‚îÇ
‚îÇ  ‚Ä¢ Uniform colors (defaults)        ‚îÇ  ‚Ä¢ Hierarchy colors (3 levels)      ‚îÇ
‚îÇ  ‚Ä¢ No overlays                      ‚îÇ  ‚Ä¢ Visual guidance overlays         ‚îÇ
‚îÇ  ‚Ä¢ Standard Petri net look          ‚îÇ  ‚Ä¢ Bounding boxes, arrows, labels   ‚îÇ
‚îÇ                                     ‚îÇ                                     ‚îÇ
‚îÇ Operations:                         ‚îÇ Operations:                         ‚îÇ
‚îÇ  ‚Ä¢ Add place/transition             ‚îÇ  ‚Ä¢ Hide/show hierarchy levels       ‚îÇ
‚îÇ  ‚Ä¢ Connect arcs                     ‚îÇ  ‚Ä¢ Abstract to source/sink          ‚îÇ
‚îÇ  ‚Ä¢ Set properties                   ‚îÇ  ‚Ä¢ Expand abstractions              ‚îÇ
‚îÇ  ‚Ä¢ Move, resize, delete             ‚îÇ  ‚Ä¢ Auto-layout pathway              ‚îÇ
‚îÇ  ‚Ä¢ Undo/redo                        ‚îÇ  ‚Ä¢ Compute/re-compute hierarchy     ‚îÇ
‚îÇ                                     ‚îÇ  ‚Ä¢ (Plus all create mode ops)       ‚îÇ
‚îÇ                                     ‚îÇ                                     ‚îÇ
‚îÇ UI Controls:                        ‚îÇ UI Controls:                        ‚îÇ
‚îÇ  ‚Ä¢ Left palette (add objects)       ‚îÇ  ‚Ä¢ Right panel (edit pathway)       ‚îÇ
‚îÇ  ‚Ä¢ Properties dialogs               ‚îÇ  ‚Ä¢ Visibility checkboxes            ‚îÇ
‚îÇ  ‚Ä¢ Context menus                    ‚îÇ  ‚Ä¢ Visual mode radio buttons        ‚îÇ
‚îÇ  ‚Ä¢ Transformation handles           ‚îÇ  ‚Ä¢ Overlay toggles                  ‚îÇ
‚îÇ                                     ‚îÇ  ‚Ä¢ Action buttons                   ‚îÇ
‚îÇ                                     ‚îÇ                                     ‚îÇ
‚îÇ Keyboard Shortcuts:                 ‚îÇ Keyboard Shortcuts:                 ‚îÇ
‚îÇ  ‚Ä¢ Ctrl+Z/Y (undo/redo)             ‚îÇ  ‚Ä¢ H (highlight mode)               ‚îÇ
‚îÇ  ‚Ä¢ Del (delete)                     ‚îÇ  ‚Ä¢ G (ghost mode)                   ‚îÇ
‚îÇ  ‚Ä¢ Ctrl+A (select all)              ‚îÇ  ‚Ä¢ M (heatmap mode)                 ‚îÇ
‚îÇ  ‚Ä¢ Ctrl+C/V (copy/paste)            ‚îÇ  ‚Ä¢ F (focus mode)                   ‚îÇ
‚îÇ                                     ‚îÇ  ‚Ä¢ 0/1/2 (show level)               ‚îÇ
‚îÇ                                     ‚îÇ  ‚Ä¢ (Plus all create shortcuts)      ‚îÇ
‚îÇ                                     ‚îÇ                                     ‚îÇ
‚îÇ Data Source:                        ‚îÇ Data Source:                        ‚îÇ
‚îÇ  ‚Ä¢ User-created                     ‚îÇ  ‚Ä¢ KEGG import                      ‚îÇ
‚îÇ  ‚Ä¢ Loaded .shy files                ‚îÇ  ‚Ä¢ Manual hierarchy computation     ‚îÇ
‚îÇ  ‚Ä¢ Empty canvas                     ‚îÇ  ‚Ä¢ Enriched with metadata           ‚îÇ
‚îÇ                                     ‚îÇ                                     ‚îÇ
‚îÇ Metadata:                           ‚îÇ Metadata:                           ‚îÇ
‚îÇ  ‚Ä¢ Basic properties only            ‚îÇ  ‚Ä¢ hierarchy_level (0, 1, 2)        ‚îÇ
‚îÇ  ‚Ä¢ User-defined labels              ‚îÇ  ‚Ä¢ centrality_score (float)         ‚îÇ
‚îÇ  ‚Ä¢ Transition types                 ‚îÇ  ‚Ä¢ kegg_id (for imported)           ‚îÇ
‚îÇ  ‚Ä¢ Guard/rate functions             ‚îÇ  ‚Ä¢ abstracted_pathway (for S/S)     ‚îÇ
‚îÇ                                     ‚îÇ  ‚Ä¢ (Plus all basic metadata)        ‚îÇ
‚îÇ                                     ‚îÇ                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üé® Visual Examples

### CREATE MODE - Clean, Uniform Appearance

```
Standard Petri Net:

  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ  [P1]  ‚îÇ ‚Üê Default color (white/light gray)
  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚îÇ ‚Üê Standard arc (black, 1px)
      ‚Üì
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ  (T1)  ‚îÇ ‚Üê Default color (white/light gray)
  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚îÇ
      ‚Üì
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ  [P2]  ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

No overlay, no guidance, no hierarchy information.
Simple, clean, user is in full control.
```

### PATHWAY EDIT MODE - Hierarchy-Colored with Overlays

```
KEGG Pathway (Glycolysis):

  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Main Backbone (Level 0) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚Üê Overlay label
  ‚îÇ                                               ‚îÇ
  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                   ‚îÇ ‚Üê Bounding box
  ‚îÇ  ‚îÇ  [G6P] ‚îÇ ‚Üê Dark blue (high importance)    ‚îÇ   (semi-transparent)
  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                   ‚îÇ
  ‚îÇ      ‚îÇ ‚Üê Thick arc (3px, dark gray)          ‚îÇ
  ‚îÇ      ‚Üì                                        ‚îÇ
  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                   ‚îÇ
  ‚îÇ  ‚îÇ  (PGI) ‚îÇ ‚Üê Dark green (enzyme)            ‚îÇ
  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                   ‚îÇ
  ‚îÇ      ‚îÇ                                        ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚Üì     ‚Üô Orange flow arrow (overlay)
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Primary Branch (Level 1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ                                               ‚îÇ
  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                   ‚îÇ
  ‚îÇ  ‚îÇ [F6P]  ‚îÇ ‚Üê Medium blue                    ‚îÇ
  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                   ‚îÇ
  ‚îÇ      ‚îÇ ‚Üê Medium arc (2px)                    ‚îÇ
  ‚îÇ      ‚Üì                                        ‚îÇ
  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                   ‚îÇ
  ‚îÇ  ‚îÇ (PFK)  ‚îÇ ‚Üê Medium green                   ‚îÇ
  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                   ‚îÇ
  ‚îÇ                                               ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

[Secondary paths hidden - replaced with SOURCE/SINK]

[Minimap in corner] ‚Üê Small overview of full pathway
```

---

## üîÑ Mode Switching Behavior

### When to Use Each Mode

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Decision Tree: Which Mode?                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                          ‚îÇ
‚îÇ  Are you working with an imported KEGG pathway?         ‚îÇ
‚îÇ  ‚îú‚îÄ YES ‚Üí Use PATHWAY EDIT MODE                         ‚îÇ
‚îÇ  ‚îÇ         ‚Ä¢ Get hierarchy colors automatically          ‚îÇ
‚îÇ  ‚îÇ         ‚Ä¢ Use visual guidance overlays                ‚îÇ
‚îÇ  ‚îÇ         ‚Ä¢ Hide/show levels as needed                  ‚îÇ
‚îÇ  ‚îÇ                                                        ‚îÇ
‚îÇ  ‚îî‚îÄ NO ‚Üí Are you building from scratch?                 ‚îÇ
‚îÇ      ‚îú‚îÄ YES ‚Üí Use CREATE MODE                            ‚îÇ
‚îÇ      ‚îÇ         ‚Ä¢ Clean canvas, no distractions           ‚îÇ
‚îÇ      ‚îÇ         ‚Ä¢ Full control over structure             ‚îÇ
‚îÇ      ‚îÇ                                                    ‚îÇ
‚îÇ      ‚îî‚îÄ Is it a manually created complex network?       ‚îÇ
‚îÇ          ‚îú‚îÄ YES ‚Üí You can switch to PATHWAY EDIT MODE   ‚îÇ
‚îÇ          ‚îÇ         ‚Ä¢ App will compute hierarchy          ‚îÇ
‚îÇ          ‚îÇ         ‚Ä¢ Get colors and guidance             ‚îÇ
‚îÇ          ‚îÇ                                                ‚îÇ
‚îÇ          ‚îî‚îÄ NO ‚Üí Stay in CREATE MODE                    ‚îÇ
‚îÇ                   ‚Ä¢ Simple nets don't need hierarchy     ‚îÇ
‚îÇ                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Automatic Mode Detection

The app can **suggest** the appropriate mode:

```python
def suggest_editing_mode(manager):
    """
    Suggest best editing mode based on document characteristics.
    """
    # Check if document has KEGG metadata
    has_kegg_import = any(
        'kegg_id' in obj.metadata
        for obj in manager.places + manager.transitions
    )
    
    if has_kegg_import:
        return 'pathway_edit', "This is an imported KEGG pathway"
    
    # Check if document has hierarchy metadata
    has_hierarchy = any(
        'hierarchy_level' in obj.metadata
        for obj in manager.places + manager.transitions
    )
    
    if has_hierarchy:
        return 'pathway_edit', "This document has pathway hierarchy"
    
    # Check complexity (many nodes ‚Üí might benefit from hierarchy)
    node_count = len(manager.places) + len(manager.transitions)
    
    if node_count > 20:
        return 'pathway_edit', f"Large network ({node_count} nodes) might benefit from hierarchy visualization"
    
    # Default: create mode
    return 'create', "Simple network, create mode recommended"
```

---

## üéØ Key Design Principles

### 1. **Mode Separation is Clear**
- Different toolbar button state
- Different panel shown (left palette vs. right edit panel)
- Different visual appearance (uniform vs. colored)
- Different status bar text

### 2. **Non-Destructive Switching**
- Switching modes doesn't modify the document
- Colors are temporary visual aids (not saved)
- Can switch back and forth freely
- Original data preserved

### 3. **Progressive Enhancement**
- CREATE mode: Simple, no frills
- PATHWAY EDIT mode: Enhanced visualization
- User chooses complexity level

### 4. **Context-Aware Defaults**
- Imported KEGG ‚Üí Auto-switch to pathway edit mode
- New document ‚Üí Start in create mode
- Loaded .shy file ‚Üí Check for hierarchy metadata

---

## üõ†Ô∏è Implementation Strategy

### Phase 1: Foundation (START HERE) ‚úÖ
**Goal**: Get mode switching working

```
1. Create EditingModeManager class
2. Add mode toggle to toolbar
3. Implement basic switching logic
4. Test: modes don't interfere with each other
```

**Result**: User can toggle between modes, nothing breaks.

---

### Phase 2: Visual Differentiation
**Goal**: Make modes look different

```
1. Apply hierarchy colors in pathway edit mode
2. Reset to default colors in create mode
3. Test: colors update on mode switch
```

**Result**: Clear visual distinction between modes.

---

### Phase 3: Mode-Specific Features
**Goal**: Add pathway edit panel and overlays

```
1. Create pathway edit panel UI
2. Add overlay rendering
3. Implement visibility controls
4. Test: features only available in correct mode
```

**Result**: Each mode has its own features.

---

### Phase 4: Polish & Integration
**Goal**: Seamless user experience

```
1. Add keyboard shortcuts
2. Add mode suggestions
3. Add tooltips and help text
4. Test: user can discover and use both modes
```

**Result**: Production-ready dual mode system.

---

## üìö Documentation Checklist

- [ ] User guide: "When to use each mode"
- [ ] Tutorial: "Switching between modes"
- [ ] Reference: "Pathway edit mode features"
- [ ] Video: "Importing and editing KEGG pathways"
- [ ] FAQ: "Why do I see colored nodes?"

---

## üöÄ Next Steps

**Immediate Actions**:
1. Review this plan
2. Decide if approach is correct
3. Prioritize phases

**Start Implementation**:
- Phase 1 (Foundation) - 2 days
- Can demo mode switching immediately
- Low risk, high value

**Future Enhancements**:
- Custom color schemes (user preferences)
- Save/load visual mode settings
- Export pathway with hierarchy colors
- 3D visualization mode (future)

---

**Questions?** Ask before starting implementation! üé®
